<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function slow(x) {
        // CPU 집약적인 작업이 여기에 올 수 있습니다.
        alert(`slow(${x})을/를 호출함`)
        return x
      }

      function cachingDecorator(func) {
        let cache = new Map()

        return function (x) {
          if (cache.has(x)) {
            // cache에 해당 키가 있으면
            return cache.get(x) //대응하는 값을 cache에서 읽어옵니다
          }

          let result = func(x)

          cache.set(x, result)
          return result
        }
      }

      slow = cachingDecorator(slow)

      alert(slow(1)) // slow(1)이 저장되었습니다.
      alert("다시 호출: " + slow(1)) // 동일한 결과

      alert(slow(2)) // slow(2)가 저장되었습니다.
      alert("다시 호출: " + slow(2)) // 동일한 결과
    </script>
  </body>
</html>
